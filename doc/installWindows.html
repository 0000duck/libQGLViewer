<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>libQGLViewer installation on Windows</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link href="qglviewer.css" rel="stylesheet" type="text/css" />
  <link rel="shortcut icon" href="images/qglviewer.ico" type="image/x-icon" />
  <link rel="icon" href="images/qglviewer.icon.png" type="image/png" />
</head>
<body>

<div class="banner">
  <a class="qindex" href="index.html">Home</a>
  <a class="qindex" href="refManual/hierarchy.html">Documentation</a>
  <a class="qindex highlight" href="download.html">Download</a>
  <a class="qindex" href="examples/index.html">Examples</a>
  <a class="qindex" href="developer.html">Developer</a>
</div>

<h1>libQGLViewer installation<br/>
<img src="images/windows.png" width="55" height="54" align="middle" alt="windows"/> Windows</h1>

<div class="summary">
<b>&raquo;</b> Installation using <a href="#qt3">Qt version 3</a><br/>
<b>&raquo;</b> Installation using <a href="#qt2.3">Qt version 2.3</a><br/>
<b>&raquo;</b> Installation using <a href="#cygwin">cygwin linux emulator</a><br/>
<b>&raquo;</b> Details on <a href="#qt">Qt installation</a><br/>
<b>&raquo;</b> Installation of the <a href="#plugin">QGLViewer designer plugin</a><br/>
</div>

<a name="qt3"></a>
<h2>Using Qt version 3</h2>
<ol>
<li>Make sure Qt is installed on your machine, and recognized as an add-in in .NET (see the <i>Tools Add-In
manager</i> <span style="color:red">*</span> menu)</li>

<li>Download and unzip the sources : <a href="#WEBURL#/src/libQGLViewer-#VERSION#-#RELEASE#.zip">libQGLViewer-#VERSION#-#RELEASE#.zip</a></li>

<li>Start .NET and use the <i>Open Qt project</i> <span style="color:red">*</span> icon to open <code>QGLViewer/QGLViewer.pro</code></li>

<li>Visual Studio 6.0 only : Use <i>File-Open workspace</i> to open the <code>.dsp</code> generated
file, and select <i>Release</i> as the <i>Build/Active Configuration</i></li>

<li>Compile the library</li>

<li>Copy <code>QGLViewer#CATVERSION#.dll</code><span style="color:red">*</span> in a library
directory, such as <code>C:\WINDOWS\system32</code> (or <code>C:\WINNT\system32</code> with Windows
2000). Alternately, you can copy it to every application directory</li>

<li><a href="examples/index.html#windows">Compile the examples</a> to discover the library</li>
</ol>

<p>
If your Qt version is lower than 3.1, you have to install the <a
href="http://www.xmission.com/~nate/glut.html">GLUT library</a> in order to have text display. Add
the paths to GLUT in your <code>Include</code> and <code>Library</code>
<i>Project-Properties</i><span style="color:red">*</span>, and copy <code>glut32.dll</code> in a
library directory (as in item 6 above).
</p>

Add <code>staticlib</code> in the <code>CONFIG</code> line of <code>QGLViewer.pro</code> to compile
a static library instead of a dll.

<p>
<span style="color:red">*</span> Names are given in .NET standards, and differ from those of Visual 6.
Here is a correspondence table:
</p>

<table>
<tr style="background-color:#66a; color:#eef; text-align:center"><th>.NET</th><th>Visual Studio 6</th></tr>
<tr style="background-color:#ddf"><td>Tools - Add-Ins manager - QtNet</td><td>Tools - Customize - Add-ins and Macro Files/QMsDev Add in</td></tr>
<tr style="background-color:#bbd"><td>Open Qt Project</td><td>Generate Qt Project</td></tr>
<tr style="background-color:#ddf"><td>QGLViewer#CATVERSION#.dll</td><td>QGLViewer.dll</td></tr>
<tr style="background-color:#bbd"><td>Project-Properties-C/C++-General-Additional Include Directories</td><td>Tools-Options-Directories-Include files</td></tr>
<tr style="background-color:#ddf"><td>Project-Properties-Linker-General-Additional Library Directories</td><td>Tools-Options-Directories-Library files</td></tr>
</table>


<a name="qt2.3"></a>
<h2>Using the free Qt 2.3 version</h2>

The 2.3 version of Qt is no longer supported by Trolltech, and it does not give a correct picture of
the actual Qt functionalities. libQGLViewer is however fully functional with Qt 2.3 and you can
download and install the <a href="ftp://ftp.trolltech.com/qt/non-commercial/QtWin230-NonCommercial.exe">free
Qt 2.3 version</a>. Note that Qt should <i>not</i> be installed in a directory whose name contains
spaces (such as <code>Program Files</code>). You also need to download and install the <a
href="http://www.xmission.com/~nate/glut.html">GLUT library</a> as explained above.

<p>
To compile with Qt 2.3, follow the installation procedure described above for Qt 3, but:
</p>
<ul>
<li>Replace the <code>QGLViewer.pro</code> file by <code>QGLViewer.Qt2.3.pro</code>.</li>

<li>Replace the <code>VRenderInterface.ui</code> file by <code>VRenderInterface.Qt2.3.ui</code>.</li>

<li>Edit <code>qglviewer.h</code> and change <code>saveSnapshot()</code> as explained on line ~491.</li>
</ul>


If you use Visual 6:
<ul>
<li>If no <code>Project created</code> dialog is displayed when you open <code>QGLViewer.pro</code>,
try to restart Visual Studio with Administrator privileges.</li>

<li>Before compilation, add <code>/GX /GR</code> in <i>Project-Settings-C-C++, Project Options</i> for
exceptions and dynamic casts.</li>

<li>Also add <code>glut32.lib</code> to <i>Projects-Settings-Link-Object/library modules</i>.</li>

<li>You may be prompted with <code>illegal call</code> error messages during the compilation of
<code>className()</code> in moc files. Simply remove the first <code>qglviewer::</code> just after
<code>strcmp(</code> and recompile.</li>
</ul>


If you use .NET (Thanks to Lionel for these tricks):
<ul>
<li>Generate the <code>.dsp</code> file using:
<pre>
tmake -win32 -t vclib -o QGLViewer.dsp QGLViewer.pro
</pre>
Open the file using .NET and accept all convertions into the <code>.vcproj</code>.
</li>

<li>In the project file list, right click on <code>VRenderInterface.ui</code> and select
<i>Properties</i>. Replace <code>uic</code> by <code>%QTDIR%\bin\uic</code> in <i>Custom Build,
Build command option</i>.</li>

<li>Remove <code>QT_DLL</code> from the <i>C++ preprocessor properties</i>.</li>

<li>Comment out the <code>initializeSnapshotFormats()</code> line in <code>qglviewer.cpp defaultConstructor()</code>.</li>

<li>Add a <code>NO_VECTORIAL_RENDER</code> define (snapshots are not supported with .NET and Qt 2.3).</li>

<li>Set <i>Enable Run-Time type info</i> to yes (/GR) in <i>C++ Language settings</i>.</li>

<li>Add the following static variable definitions at the beginning of <code>qglviewer.cpp</code>:
<pre>
QString QString::null;
QStringData * QString::shared_null;
QChar QChar::null;
QApplication * qApp;
</pre>
</li>
</ul>

This <a href="http://hohle.net/scrap_post.php?post=14">page</a> details how to patch Qt 2.3 to make it work with .NET.
This has not yet been tested (<a href="mailto:Gilles dot Debunne at imag dot fr">feedback welcome</a>), but may avoid the previous patchs/hacks.

<a name="cygwin"></a>
<h2>Using the latest Qt version with cygwin</h2>

An other option is to install the <a href="http://www.cygwin.com/">cygwin</a> linux emulator, with
the <a href="http://kde-cygwin.sourceforge.net/qt3">Qt-KDE</a> port. This was successfully tested, although
Qt had to be recompiled. You may also have to remove <code>thread</code> from the
<code>CONFIG</code> line in <code>QGLViewer.pro</code>.

<p>
Then compile QGLViewer as explained in the <a href="installUnix.html">Unix installation page</a>.
You should link a file named <code>libQGLViewer.dll</code> to the resulting
<code>cygQGLViewer-1.dll</code> (or rename it) and copy <code>libQGLViewer.dll</code> in the
<code>C:\WINDOWS\system32</code> directory. Note that <code>cygqt-3.dll</code> and
<code>cygqui-1.dll</code> (located in <code>$(QTDIR)/bin</code> or <code>$(QTDIR)/lib</code>) should
also be copied in that directory. Thanks Jean-Gui for these details.
</p>




<a name="qt"></a>
<h2><img src="images/qt.png" width="38" height="40" align="middle" alt="Qt"/> &nbsp; Qt installation</h2>

If you have a Qt commercial license, simply follow installation instructions. Otherwise, download
the <a href="ftp://ftp.trolltech.com/qt/non-commercial/QtWin230-NonCommercial.exe">Qt 2.3</a> non
commercial version, or the <a href="http://www.trolltech.com/developer/download/">Qt/Desktop 30 day
evaluation version</a>.

<p>
This <a href="http://hohle.net/scrap_post.php?post=14">page</a> details how to patch Qt 2.3 to make it work with .NET.
</p>

Visual Studio users must check the <i>Tools/Customize/Add-ins and Macro Files/QMsDev Add in</i> box
in order to use Qt with Visual Studio.



<a name="plugin"></a>
<h2><img src="images/qt.png" width="38" height="40" align="middle" alt="Qt"/> Installation of the designer plugin</h2>

The compilation and installation of the QGLViewer designer plugin is optional. Open the
<code>designerPlugin.pro</code> file to create your workspace. Compile it and install the resulting
library in <code>$QTDIR\plugins\designer</code> (which may require administrator privileges).

<p>
Such a plugin eases the creation of user interfaces that feature a QGLViewer using designer. It
makes a GLViewer icon appear in the designer's <code>Display</code> widget tab, as a standard Qt
widget. When added to your user interface, the widget displays the standard spiral, which can be
rotated when you test your interface (using <code>Ctrl+T</code>).
</p>

 &nbsp; &nbsp; <img src="images/designerplugin.jpg" width="800" height="300" align="middle" alt="Designer plugin" /><br/>

All the viewers' signals and slots are available and can be connected to the rest of your interface.

<p>
Note that an alternative to this plugin is to add a "Custom Widget" using the
<i>Tools/Custom</i> designer menu. <i>Load Descriptions...</i> and provide the
<code>qglviewer.cw</code> custom widget description file, located in the QGLViewer header files
directory. You can customize this description with your own signals and slots and change the header
file path.
</p>

See the <a href="examples/interface.html">interface example</a> for an illustration of a user
interface that includes a QGLViewer.

<p>
Please <a href="mailto:Gilles.Debunne at imag dot fr?Subject=QGLViewer installation">let me know</a> if you
encountered installation problems that could be reported on this page.
</p>

<p>
  <a href="http://validator.w3.org/check/referer"><img src="images/xhtml.png" alt="Valid XHTML 1.0!" height="31" width="88"/></a>
  <a href="http://jigsaw.w3.org/css-validator/check/referer"><img src="images/css.png" alt="Valid CSS!" width="88" height="31"/></a>
  <i>Last modified on #DATE#.</i>
</p>
    
</body>
</html>
